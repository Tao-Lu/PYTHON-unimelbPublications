{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">

    <meta charset="UTF-8">
    <link rel="icon" href="{% static "res/favicon.ico" %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap-grid.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap-reboot.css' %}">
    <link rel="stylesheet" href="{% static 'css/dataTables.bootstrap4.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery.tag-editor.css' %}">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    
    
    <script src="{% static 'js/jquery-3.3.1.js' %}"></script>
    <script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'js/jquery.tag-editor.js' %}"></script>
    <script src="{% static 'js/jquery.tag-editor.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.js' %}"></script>
    <script src="{% static 'js/dataTables.bootstrap4.min.js' %}"></script>

    
    {% block src %}{% endblock src %}

    <style>

        #navnavnav[data-fixed="fixed"]{
            position: fixed;
            top:0;
            left: 0;
            z-index: 10;
            width: 100%;
        }

#searchDiv{
    display: flex;
    width:18rem;
    height: 2.1rem;
    margin-right: 0.5rem;
    background: white;
}
#searchBox{
    align-content: start;
    height: 100%;
    width: 100%;
}


    {% block css %}{% endblock %}

    </style>

</head>
<body>
    <div>
      <img src="{% static 'res/baseBackground.jpg' %}" style="height: 250px; min-width: 100%" class="img-responsive">
   </div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary" id="navnavnav">
        <a class="navbar-brand navLink" href="#" id="pubanalysis">Pub Analysis</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

        <div class="collapse navbar-collapse" id="navbarColor01">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link navLink" id="overview" href="#">Overview </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link navLink" id="authors" href="#">Authors</a>
                </li>
{#                <li class="nav-item">#}
{#                    <a class="nav-link " href="#">Topics</a>#}
{#                </li>#}
                <li class="nav-item">
                    <a class="nav-link navLink" id="about" href="#">About</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <select class="custom-select" id="searchSelect" style="height:33px">
                    <option selected>search by</option>
                    <option value="author">Author</option>
                    <option value="title">Title</option>
                    <option value="keywords">Keywords</option>
                </select>
                <div  id="searchDiv">
                    <input class="form-control" type="text" placeholder="Search" id="searchBox">
                </div>

                <button class="btn btn-secondary my-2 my-sm-0" type="button" id="searchdb">Search</button>

            </form>
        </div>
    </nav>

    {% block content %}{% endblock %}

</body>

<script>


    var obj = document.getElementById("navnavnav");
    var ot = obj.offsetTop;
    document.onscroll = function () {
        var st = document.body.scrollTop || document.documentElement.scrollTop;
        obj.setAttribute("data-fixed",st >= ot?"fixed":"")
    }

    $('#searchdb').on('click',function(){
       var searchKey = document.getElementById("searchBox").value;
       var searchBy = document.getElementById("searchSelect").value;
       console.log(searchBy);
       console.log(searchKey);
       var host = location.host;
       if(searchKey!=""){
           if (searchBy == 'author'){
           var url = "http://"+host+"/authorCandidate/"+searchKey;
           window.location.href = url;
           }
           else if (searchBy == 'title'){
               var url = "http://"+host+"/paperCandidate/"+searchKey;
               window.location.href = url;
           }else if (searchBy == 'keywords'){
                var url = "http://"+host+"/keywordsCandidate/"+searchKey;
                window.location.href = url;
           }
           else{
               alert("please select search method.");
           }
       }else{
           alert("please enter some search term then press search.");
       }

    });

    $('#searchSelect').on('change',function(){
        var searchBy = document.getElementById("searchSelect").value;
        if (searchBy == 'keywords'){
            $('input').tagEditor({
                placeholder: "please enter some keywords"
            });

        }else{

            $('input').tagEditor('destroy');
        }
    });

    $('.navLink').on('click',function () {
        var clickedItem = $(this).attr('id');
        var host = location.host;

        if(clickedItem == "pubanalysis"){
            var url = "http://"+host+"/homepage/";
            window.location.href = url;

        } else if(clickedItem == "overview"){
            var url = "http://"+host+"/overview/";
            window.location.href = url;

        } else if(clickedItem == "authors"){
            var url = "http://"+host+"/authorOverview/";
            window.location.href = url;

        } else if(clickedItem == "about"){
            var url = "http://"+host+"/aboutUs/";
            window.location.href = url;

        }
    });




</script>
</html>